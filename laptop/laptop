#!/bin/sh

brew_cask_is_installed() {
  local NAME=$(brew_cask_expand_alias "$1")
    brew cask list -1 | grep -Fqx "$NAME"
}

brew_cask_install() {
  if ! brew_cask_is_installed "$1"; then
    brew cask install "$@"
  fi
}

brew_cask_install_or_upgrade() {
  if brew_cask_is_installed "$1"; then
    echo "$1 is already installed, brew cask upgrade is not yet implemented"
  else
    brew cask install "$@"
  fi
}

brew tap caskroom/cask
brew update
brew install 'brew-cask'
brew install 'ack'
brew install 'thefuck'
brew install 'jmeter'
brew install 'vim'
brew install 'rbenv'
brew install 'nvm'
# Setup NVM
mkdir ~/.nvm
source $(brew --prefix nvm)/nvm.sh

brew install 'node'
brew install 'elixir'
brew cask install 'kindle'
brew cask install 'java'
brew cask install 'dropbox'
brew cask install 'google-chrome'
brew cask install 'skitch'
brew cask install 'skype'
brew cask install '1password'
brew cask install 'alfred'
brew cask install 'spectacle'
brew cask install 'evernote'
brew cask install 'google-drive'
brew cask install 'deezer'
brew cask install 'atom'
brew cask install 'nylas-n1'
brew cask install 'slack'
brew cask install 'deco'
brew cask install 'iterm2'
brew cask install 'izip'
brew cask install 'little-snitch'
brew cask install 'filezilla'
brew cask install 'visual-studio-code'
# Phoenix
mix archive.install https://github.com/phoenixframework/archives/raw/master/phoenix_new.ez
# Emacs
brew tap d12frosted/emacs-plus
brew install emacs-plus --with-cocoa --with-gnutls --with-librsvg --with-imagemagick --with-spacemacs-icon
brew linkapps
# Atom sync settings
apm install sync-settings
# Zsh
sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"
# Git base config
git config --global core.editor "vim"
git config --global user.name "Pierre Lemperiere"
git config --global user.email pierre.lemperiere@gmail.com
# Postgres
echo "============================================================="
echo "You have now to install Postgres from http://postgresapp.com/"
echo "Install also Postico the Postgres client https://eggerapps.at/postico/"
